!function(d){d.fn.menuAim=function(e){return this.each(function(){(function(e){var x=d(this),y=null,v=[],p=null,n=null,b=d.extend({rowSelector:"> li",submenuSelector:"*",submenuDirection:"right",tolerance:75,enter:d.noop,exit:d.noop,activate:d.noop,deactivate:d.noop,exitMenu:d.noop},e),i=function(e){e!=y&&(y&&b.deactivate(y),b.activate(e),y=e)},o=function(e){var t=u();t?n=setTimeout(function(){o(e)},t):i(e)},u=function(){if(!y||!d(y).is(b.submenuSelector))return 0;var e=x.offset(),t={x:e.left,y:e.top-b.tolerance},n={x:e.left+x.outerWidth(),y:t.y},i={x:e.left,y:e.top+x.outerHeight()+b.tolerance},o={x:e.left+x.outerWidth(),y:i.y},u=v[v.length-1],r=v[0];if(!u)return 0;if((r=r||u).x<e.left||r.x>o.x||r.y<e.top||r.y>o.y)return 0;if(p&&u.x==p.x&&u.y==p.y)return 0;function c(e,t){return(t.y-e.y)/(t.x-e.x)}var l=n,f=o;"left"==b.submenuDirection?(l=i,f=t):"below"==b.submenuDirection?(l=o,f=i):"above"==b.submenuDirection&&(l=t,f=n);var a=c(u,l),s=c(u,f),h=c(r,l),m=c(r,f);return a<h&&m<s?(p=u,300):(p=null,0)};x.mouseleave(function(){n&&clearTimeout(n),b.exitMenu(this)&&(y&&b.deactivate(y),y=null)}).find(b.rowSelector).mouseenter(function(){n&&clearTimeout(n),b.enter(this),o(this)}).mouseleave(function(){b.exit(this)}).click(function(){i(this)}),d(document).mousemove(function(e){v.push({x:e.pageX,y:e.pageY}),3<v.length&&v.shift()})}).call(this,e)}),this}}(jQuery);